<% return unless comic
   hidden ||= nil
   javascript_include_tag :all
%>

<%= javascript_include_tag "comic" %>

<div id="comic" <%= "class='hidden'" if hidden %> >
  <% if comic.has_original? %>
    <div id="original">
      <%= link_to "See the original from #{comic.original_date} here!", 
                  comic.original_photo.url(:display),
                  :class => 'original_link' %>
    </div>
  <% end %>
  <div class="clear"> </div>

  <div id="comic_info">
    <h1 id="title"><%= comic.title %></h1>
    <div id="date"><%= comic.date %></div>
  </div>

  <div id="photo">
    <%= image_tag comic.photo.url(:display) %>
  </div>
  <div class="clear"> </div>

  <div id="comic_controls">
    <div class="comic_control prev">
      <% if comic.prev %>
        <%= link_to 'Previous', url_for(comic.prev) %>
      <% else %>
        <%= link_to 'Previous', '#', :class => 'disabled' %>
      <% end %>
    </div>
    <div class="comic_control next">
      <% if comic.next %>
        <%= link_to 'Next', url_for(comic.next) %>
      <% else %>
        <%= link_to 'Next', '#', :class => 'disabled' %>
      <% end %>
    </div>

    <div id="social_links" class="comic_control">

      <div class="social_link" id="tweet">
        <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://anotherwebcomic.com<%= url_for(comic) %>" data-count="none" data-via="anotherwebcomic">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
      </div>

      <div class="social_link" id="fb_like">
        <iframe src="http://www.facebook.com/plugins/like.php?app_id=234735943235066&amp;href=<%= CGI::escape("http://anotherwebcomic.com" + url_for(comic)) %>&amp;send=false&amp;layout=button_count&amp;width=50&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:50px; height:21px;" allowTransparency="true"></iframe>
      </div>

      <div class="social_link" id="plus1">
        <!-- Place this tag where you want the +1 button to render -->
        <g:plusone size="medium" callback="http://anotherwebcomic.com<%= url_for(comic) %>"></g:plusone>

        <!--  Place this tag after the last plusone tag -->
        <script type="text/javascript">
          (function() {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
          })();
        </script>
      </div>

    </div>
  </div>

  <div id="blurb" class="float-left"><%= raw(comic.blurb) %></div>
  <%= render :partial => 'static/right_ad_rail' %>
</div>
<% if user_is_author? %>
  <div id="author_actions">
    <div class="author_action edit">
      <%= link_to 'Edit', edit_comic_path(comic), :class => 'edit' %>
    </div>
    <div class="author_action destroy">
      <%= link_to 'Destroy', comic_url(comic)+"/destroy", :class => 'destroy', :confirm => "sure?" %>
    </div>
    <div class="author_action spacer">
      &nbsp;
    </div>
  </div>
<% end %>
